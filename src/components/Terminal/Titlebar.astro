---
interface Props {
  lang: 'en' | 'ja';
  currentPath: string;
}

const { lang, currentPath } = Astro.props;
const otherLang = lang === 'en' ? 'ja' : 'en';
const otherLangPath = currentPath.replace(`/${lang}`, `/${otherLang}`);
---

<div class="titlebar">
  <div class="traffic-lights">
    <span class="light red"></span>
    <span class="light yellow"></span>
    <span class="light green"></span>
  </div>
  <div class="title">
    portfolio â€” ken@kenev.net
  </div>
  <div class="language-toggle">
    <a
      href={`/en${currentPath.replace(/^\/(en|ja)/, '')}`}
      class:list={['lang-link', { active: lang === 'en' }]}
      aria-label="Switch to English"
    >
      EN
    </a>
    <span class="separator">|</span>
    <a
      href={`/ja${currentPath.replace(/^\/(en|ja)/, '')}`}
      class:list={['lang-link', { active: lang === 'ja' }]}
      aria-label="Switch to Japanese"
    >
      JA
    </a>
  </div>
</div>

<style>
  .titlebar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.75rem 1rem;
    background-color: var(--bg-secondary);
    border-bottom: 1px solid var(--bg-hover);
  }

  .traffic-lights {
    display: flex;
    gap: 0.5rem;
  }

  .light {
    width: 12px;
    height: 12px;
    border-radius: 50%;
  }

  .light.red { background-color: var(--color-error); }
  .light.yellow { background-color: var(--color-highlight); }
  .light.green { background-color: var(--color-success); }

  .title {
    color: var(--text-muted);
    font-size: 0.875rem;
  }

  .language-toggle {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .lang-link {
    color: var(--text-muted);
    font-size: 0.875rem;
    padding: 0.25rem 0.5rem;
    border-radius: 3px;
    transition: all 0.2s ease;
  }

  .lang-link:hover {
    color: var(--text-primary);
    text-decoration: none;
  }

  .lang-link.active {
    color: var(--accent-primary);
    background-color: var(--bg-hover);
  }

  .separator {
    color: var(--text-muted);
  }

  @media (max-width: 768px) {
    .title {
      display: none;
    }
  }
</style>
